# Linux系统与运维面试题
### 问：什么是正向代理和反向代理？

**参考答案：**

- 正向代理，一个位于客户端和原始服务器(origin server)之间的服务器，为了从原始服务器取得内容，客户端向代理发送一个请求并指定目标(原始服务器)。然后代理向原始服务器转交请求并将获得的内容返回给客户端。客户端才能使用正向代理。**总结为一句话：代理端代理的是客户端；**
- 反向代理是指以代理服务器来接受internet上的连接请求，然后将请求，发给内部网络上的服务器并将从服务器上得到的结果返回给internet上请求连接的客户端，此时代理服务器对外就表现为一个反向代理服务器。**总结就一句话：代理端代理的是服务端。**



### 问：nginx是什么？有什么优点？

**参考答案：** 

Nginx是一个高性能的HTTP和反向代理服务器，也是一个IMAP/POP3/SMTP服务器。目前使用最广泛之一的web服务器或者代理服务器。

***优点：***

- 跨平台、配置简单
- 非阻塞、高并发连接：处理2-3万并发连接数，官方监测能支持5万并发
- 内存消耗小：开启10个nginx才占150M内存 成本低廉：开源
- 内置的健康检查功能：如果有一个服务器宕机，会做一个健康检查，再发送的请求就不会发送到宕机的服务器了。重新将请求提交到其他的节点上。
- 节省宽带：支持GZIP压缩，可以添加浏览器本地缓存
- 稳定性高：宕机的概率非常小
- master/worker结构：一个master进程，生成一个或者多个worker进程
- 接收用户请求是异步的：浏览器将请求发送到nginx服务器，它先将用户请求全部接收下来，再一次性发送给后端web服务器，极大减轻了web服务器的压力
- 一边接收web服务器的返回数据，一边发送给浏览器客户端
- 网络依赖性比较低，只要ping通就可以负载均衡
- 可以有多台nginx服务器
- 事件驱动：通信机制采用epoll模型



### 问：什么是机器负载？

**参考答案：**

在UNIX系统中，系统负载是对当前CPU工作量的度量，被定义为特定时间间隔内运行队列中的平均线程数。load average 表示机器一段时间内的平均load。这个值越低越好。负载过高会导致机器无法处理其他请求及操作，甚至导致死机。

Linux的负载高，主要是由于CPU使用、内存使用、IO消耗三部分构成。任意一项使用过多，都将导致服务器负载的急剧攀升。



### 问：怎么查看机器负载？

**参考答案：**

在Linux机器上，有多个命令都可以查看机器的负载信息。其中包括uptime、top、w等。

**（1）uptime命令**

uptime命令能够打印系统总共运行了多长时间和系统的平均负载。uptime命令可以显示的信息显示依次为：现在时间、系统已经运行了多长时间、目前有多少登陆用户、系统在过去的1分钟、5分钟和15分钟内的平均负载。

![uptime命令截图.jpg](https://i.loli.net/2020/04/24/nGh2XQMlEv9oJmI.jpg)
这行信息的后半部分，显示"load average"，它的意思是"系统的平均负荷"，里面有三个数字，我们可以从中判断系统负荷是大还是小。

`0.00 0.03 0.04` 这三个数字的意思分别是1分钟、5分钟、15分钟内系统的平均负荷。我们一般表示为load1、load5、load15

**（2）w命令**

w命令的主要功能其实是显示目前登入系统的用户信息。但是与who不同的是，w命令功能更加强大，w命令还可以显示：当前时间，系统启动到现在的时间，登录用户的数目，系统在最近1分钟、5分钟和15分钟的平均负载。然后是每个用户的各项数据，项目显示顺序如下：登录帐号、终端名称、远 程主机名、登录时间、空闲时间、JCPU、PCPU、当前正在运行进程的命令行。

![w命令.jpg](https://i.loli.net/2020/04/24/IT75PdFCSflyQGZ.jpg)
从上面的`w`命令的结果可以看到，当前系统时间是21:57，系统启动到现在经历了7分钟，共有2个用户登录。系统在近1分钟、5分钟和15分钟的平均负载分别是`0.00 0.03 0.04`。这和uptime得到的结果相同。 下面还打印了一些登录的用户的各项数据，不详细介绍了。

**（3）top命令**

top命令是Linux下常用的性能分析工具，能够实时显示系统中各个进程的资源占用状况，类似于Windows的任务管理器。
![top命令.jpg](https://i.loli.net/2020/04/24/YABZu76c9ivjs3L.jpg)
上面的输出结果中，load average: `0.00 0.03 0.04` 显示的就是负载信息。



